<%- include("partial/header") -%>

    <%- include("partial/navbar") -%>

        <main class="w-full max-w-md mx-auto p-6">

          <div style="display: none;" id="email-sent" class="flex flex-inline items-center p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50" role="alert">
            <svg class="flex flex-inline w-4 h-4 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
            </svg>
            <span class="sr-only">Info</span>
            <div>
              <span class="font-medium">Success!</span> The verification link has been resent.
            </div>
          </div>

            <div style="display: none;" id="email-unverified" class="p-4 mb-4 text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 null:bg-gray-800 null:text-yellow-300 null:border-yellow-800" role="alert">
                <div class="flex items-center">
                  <svg class="flex-shrink-0 w-4 h-4 me-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
                  </svg>
                  <span class="sr-only">Info</span>
                  <h3 class="text-lg font-medium">Email Unverified</h3>
                </div>
                <div class="mt-2 mb-4 text-sm">
                    Your email is not verified. Please verify your email using the verification link sent to your registered email address.
                </div>
                <div class="flex">
                  <a target="_blank" href="https://mail.google.com">
                    <button type="button" class="text-white bg-yellow-800 hover:bg-yellow-900 focus:ring-4 focus:outline-none focus:ring-yellow-300 font-medium rounded-lg text-xs px-3 py-1.5 me-2 text-center inline-flex items-center null:bg-yellow-300 null:text-gray-800 null:hover:bg-yellow-400 null:focus:ring-yellow-800">
                        <svg class="me-2 h-3 w-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 14">
                          <path d="M10 0C4.612 0 0 5.336 0 7c0 1.742 3.546 7 10 7 6.454 0 10-5.258 10-7 0-1.664-4.612-7-10-7Zm0 10a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"/>
                        </svg>
                        Open Gmail
                      </button>
                  </a>
                </div>
              </div>

            <div
                class="mt-7 bg-white border border-gray-200 rounded-xl shadow-sm null:bg-gray-800 null:border-gray-700">
                
                
                <div class="p-4 sm:p-7">
                    <div class="text-center">
                        <h1 class="block text-2xl font-bold text-gray-800 null:text-white">Your Profile</h1>
                    </div>
                    

                    <div class="mt-5">

                        

                        <!-- Form -->
                        <form>
                            <div class="grid gap-y-4">
                                <!-- Form Group -->
                                <div>
                                    <label for="email" class="block text-sm mb-2 null:text-white">Full Name</label>
                                    <div class="relative">
                                        <input disabled value="<%= profile.name %>"
                                            class="py-3 px-4 block w-full border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none null:bg-slate-900 null:border-gray-700 null:text-gray-400 null:focus:ring-gray-600"
                                            required aria-describedby="email-error">
                                        <div class="hidden absolute inset-y-0 end-0 pointer-events-none pe-3">
                                            <svg class="size-5 text-red-500" width="16" height="16" fill="currentColor"
                                                viewBox="0 0 16 16" aria-hidden="true">
                                                <path
                                                    d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z" />
                                            </svg>
                                        </div>
                                    </div>
                                    
                                </div>
                                <!-- End Form Group -->

                                <!-- Form Group -->
                                <div>
                                    <label for="email" class="block text-sm mb-2 null:text-white">Email address</label>
                                    <div class="relative">
                                        <input disabled value="<%= profile.email %>"
                                            class="py-3 px-4 block w-full border border-gray-300 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none null:bg-slate-900 null:border-gray-700 null:text-gray-400 null:focus:ring-gray-600"
                                            required aria-describedby="email-error">
                                        <div class="hidden absolute inset-y-0 end-0 pointer-events-none pe-3">
                                            <svg class="size-5 text-red-500" width="16" height="16" fill="currentColor"
                                                viewBox="0 0 16 16" aria-hidden="true">
                                                <path
                                                    d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z" />
                                            </svg>
                                        </div>
                                    </div>
                                    <% if(profile.verified){ %>
                                        <p class=" text-xs text-teal-500 mt-2 flex flex-inline ml-2">
                                            <svg class="w-3 h-3 text-teal-600 flex-inline mr-1 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                                                <path fill-rule="evenodd" d="M12 2a3 3 0 0 0-2.1.9l-.9.9a1 1 0 0 1-.7.3H7a3 3 0 0 0-3 3v1.2c0 .3 0 .5-.2.7l-1 .9a3 3 0 0 0 0 4.2l1 .9c.2.2.3.4.3.7V17a3 3 0 0 0 3 3h1.2c.3 0 .5 0 .7.2l.9 1a3 3 0 0 0 4.2 0l.9-1c.2-.2.4-.3.7-.3H17a3 3 0 0 0 3-3v-1.2c0-.3 0-.5.2-.7l1-.9a3 3 0 0 0 0-4.2l-1-.9a1 1 0 0 1-.3-.7V7a3 3 0 0 0-3-3h-1.2a1 1 0 0 1-.7-.2l-.9-1A3 3 0 0 0 12 2Zm3.7 7.7a1 1 0 1 0-1.4-1.4L10 12.6l-1.3-1.3a1 1 0 0 0-1.4 1.4l2 2c.4.4 1 .4 1.4 0l5-5Z" clip-rule="evenodd"/>
                                              </svg>
                                              Verified</p>
                                    <% } else { %>
                                        <p class=" text-xs text-red-500 mt-2 flex flex-inline ml-2">
                                              <svg class="w-3 h-3 text-red-600 flex-inline mr-1 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                                                <path fill-rule="evenodd" d="M2 12a10 10 0 1 1 20 0 10 10 0 0 1-20 0Zm11-4a1 1 0 1 0-2 0v5a1 1 0 1 0 2 0V8Zm-1 7a1 1 0 1 0 0 2 1 1 0 1 0 0-2Z" clip-rule="evenodd"/>
                                              </svg>
                                              
                                              Unverified <a class="ml-3 text-blue-600 hover:underline" href="/email_validation/resend?userID=<%= profile._id %>">Resend Link</a>
                                            </p>
                                    <% } %>
                                </div>
                                <!-- End Form Group -->
                              
                            </div>
                        </form>
                        <!-- End Form -->
                    </div>
                </div>
            </div>
        </main>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
              const urlParams = new URLSearchParams(window.location.search);
    
              if (urlParams.has('returnMsg') && urlParams.get('returnMsg') === 'emailUnverified') {
                // Show the alert div
                document.getElementById('email-unverified').style.display = 'block';
                setTimeout(function () {
                  document.getElementById('email-unverified').style.display = 'none';
                }, 30000);
              }

              if (urlParams.has('returnMsg') && urlParams.get('returnMsg') === 'emailResent') {
                // Show the alert div
                document.getElementById('email-sent').style.display = 'flex';
                setTimeout(function () {
                  document.getElementById('email-sent').style.display = 'none';
                }, 10000);
              }

            });
    
          </script>

        <%- include("partial/footer") -%>